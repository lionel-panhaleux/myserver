---
- name: Deploy the archon Discord bot
  hosts: krcg2
  become: true
  gather_facts: false
  vars:
    username: lpanhaleux
  roles:
    - role: postgresql-database
      pd_database: archon
      pd_user: archon
      pd_password: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        65386331306334643731636637323330666433623331363637353435383630663163616664383461
        6432356661623538303236386333326538376466383761310a306661396163323830653836633363
        33346638353431613164653732633762363837383135373831333061636531616162303763663235
        3436633763343863310a663539643266346562353361323637666461306639373863626561353833
        63373634386233616363666336356566643237393364366432306130663765346437
    - role: python-worker
      pw_package: archon-bot
      pw_app_name: archon-bot
      pw_command: archon-bot
      pw_env:
        PYTHONOPTIMIZE: 1
        DISCORD_TOKEN: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36383530333131373539303962323633333031373164663334303835343135623237666361306465
          3265346164303839366538666431646634376233656237310a346663363737396261623033383837
          31623961353531336636313864313133663465626538666465303037303765363761383161386562
          3464343966643265660a663634323631663461353032343832353266363062353731316131336263
          38623133386133653234353561356564636266633865656462316166666232333764303335336138
          34326364666237376331613033303665313233373930326563316363356161666235663339643534
          626236636437623737333335623233383632
        VEKN_LOGIN: lip
        VEKN_PASSWORD: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          37383632613439303139626135366132303032373933333962623066356664646530313237646362
          6636343466393265643037663361393837656238663030620a303663353832343965663635333734
          64643335656638383332643566366365616235373538663765653462386638613734623934306335
          6366613931316464330a616437326531623639653961363961353430316132363939343734623635
          3236
        DB_USER: archon
        DB_PWD: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65386331306334643731636637323330666433623331363637353435383630663163616664383461
          6432356661623538303236386333326538376466383761310a306661396163323830653836633363
          33346638353431613164653732633762363837383135373831333061636531616162303763663235
          3436633763343863310a663539643266346562353361323637666461306639373863626561353833
          63373634386233616363666336356566643237393364366432306130663765346437
